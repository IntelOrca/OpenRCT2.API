@inject AuthorisationService Auth

<header>
    <div class="d-flex flex-column flex-md-row align-items-center pb-3 mb-4 border-bottom">
        <a href="/" class="d-flex text-dark text-decoration-none">
            <img src="/img/logo.svg" height="50" class="me-2" />
            <div>
                <div class="fs-4">OpenRCT2 Emporium</div>
                <small class="text-muted d-block" style="margin: -8px 0 0 28px">A place to share parks, designs and custom scenery.</small>
            </div>
        </a>
        <nav class="d-inline-flex mt-2 mt-md-0 ms-md-auto">
            @if (Auth.Status == UserAccountStatus.Administrator)
            {
                <a class="me-3 py-2 text-dark text-decoration-none dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">Admin</a>
                <ul class="dropdown-menu">
                    <li><a class="dropdown-item" href="/admin/users">Users</a></li>
                </ul>
            }
            <a class="me-3 py-2 text-dark text-decoration-none" href="/recent">Recent</a>
            <a class="me-3 py-2 text-dark text-decoration-none" href="/popular">Popular</a>
            @if (Auth.IsSignedIn)
            {
                <a class="me-3 py-2 text-dark text-decoration-none" href="/upload">Upload</a>
            }

            <span class="me-3 py-2 text-dark text-decoration-none user-select-none"></span>

            @if (Auth.IsSignedIn)
            {
                <div class="py-2">
                    <a class="text-dark text-decoration-none fw-bold" href="/@Auth.Name"><Icon Kind="person-fill" /> @Auth.Name</a> &bull;
                    <a class="text-dark text-decoration-none" href="/signout">Sign out</a>
                </div>
            }
            else
            {
                <a class="me-3 py-2 text-dark text-decoration-none" href="/signup">Sign up</a>
                <a class="py-2 text-dark text-decoration-none" href="/signin">Sign in</a>
            }
        </nav>
    </div>
</header>

@if (Auth.Status == UserAccountStatus.Suspended && !string.IsNullOrEmpty(Auth.SuspensionReason))
{
    <div class="alert alert-danger" role="alert">
        <Icon Kind="exclamation-triangle-fill" />
        @Auth.SuspensionReason
    </div>
}

@code {
    protected override void OnInitialized()
    {
        Auth.OnAuthorisationChanged += (s, e) => StateHasChanged();
    }
}
